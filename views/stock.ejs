<%- include('partials/navbar') %>

<div class="d-flex">
  <link rel="stylesheet" href="/css/styles.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <div class="container mt-5" style="margin-left: 320px; padding: 20px;">
    <h1>Current Stock</h1>

    <!-- Good Condition Table -->
    <h2>Good Condition</h2>
    <table class="table table-striped table-bordered">
      <thead class="table-success">
        <tr>
          <th>Product</th>
          <th>Category</th>
          <th>Quantity</th>
          <th>Price per Unit</th>
          <th>Supplier</th>
          <th>Order Date</th>
          <th>Arrival Date</th>
        </tr>
      </thead>
      <tbody>
        <% stockItems.filter(stock => stock.productCondition === "Good").forEach(stock => { %>
          <tr>
            <td><%= stock.product ? stock.product.name : "Unknown" %></td>
            <td><%= stock.category %></td>
            <td><%= stock.quantity %></td>
            <td><%= stock.pricePerUnit %></td>
            <td><%= stock.supplierName ? stock.supplierName : "No Supplier" %></td>
            <td><%= stock.orderDate ? stock.orderDate.toDateString() : "Not Set" %></td>
            <td><%= stock.arrivalDate ? stock.arrivalDate.toDateString() : "Not Set" %></td>
          </tr>
        <% }) %>
      </tbody>
    </table>

    <!-- Damaged Condition Table -->
    <h2>Damaged Condition</h2>
    <table class="table table-striped table-bordered">
      <thead class="table-danger">
        <tr>
          <th>Product</th>
          <th>Category</th>
          <th>Quantity</th>
          <th>Price per Unit</th>
          <th>Supplier</th>
          <th>Order Date</th>
          <th>Arrival Date</th>
        </tr>
      </thead>
      <tbody>
        <% stockItems.filter(stock => stock.productCondition === "Damaged").forEach(stock => { %>
          <tr>
            <td><%= stock.product ? stock.product.name : "Unknown" %></td>
            <td><%= stock.category %></td>
            <td><%= stock.quantity %></td>
            <td><%= stock.pricePerUnit %></td>
            <td><%= stock.supplierName ? stock.supplierName : "No Supplier" %></td>
            <td><%= stock.orderDate ? stock.orderDate.toDateString() : "Not Set" %></td>
            <td><%= stock.arrivalDate ? stock.arrivalDate.toDateString() : "Not Set" %></td>
          </tr>
        <% }) %>
      </tbody>
    </table>

    <!-- Cancelled Orders Table -->
    <h2>Cancelled Orders</h2>
    <table class="table table-striped table-bordered">
      <thead class="table-warning">
        <tr>
          <th>Product</th>
          <th>Category</th>
          <th>Quantity</th>
          <th>Price Per Unit</th>
          <th>Supplier</th>
          <th>Order Date</th>
          <th>Arrival Date</th>
        </tr>
      </thead>
      <tbody>
        <% stockItems.filter(stock => stock.productCondition === "Cancelled").forEach(stock => { %>
          <tr>
            <td><%= stock.product ? stock.product.name : "Unknown" %></td>
            <td><%= stock.category %></td>
            <td><%= stock.quantity %></td>
            <td><%= stock.pricePerUnit %></td>
            <td><%= stock.supplierName ? stock.supplierName : "No Supplier" %></td>
            <td><%= stock.orderDate ? stock.orderDate.toDateString() : "Not Set" %></td>
            <td><%= stock.arrivalDate ? stock.arrivalDate.toDateString() : "Not Set" %></td>
          </tr>
        <% }) %>
      </tbody>
    </table>

  </div>
</div>
